<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Générateur de Citations</title>
</head>
<body>
  <h1>Générateur de Citations</h1>
  <blockquote id="citation">Chargement...</blockquote>
  <button id="nouvelle">Nouvelle citation</button>

  <script>
    async function chargerCitation() {
      var citationElement = document.getElementById('citation');
      citationElement.innerText = 'Chargement...';
      
      try {
        var response = await fetch('/api/citation');
        
        if (!response.ok) {
          throw new Error('Erreur serveur');
        }
        
        var data = await response.json();
        
        // data est un objet JSON avec la propriété "citation"
        if (data.citation) {
          citationElement.innerText = data.citation;
        } else {
          throw new Error('Pas de citation dans la réponse');
        }
        
      } catch (error) {
        console.error('Erreur:', error);
        citationElement.innerText = 'Erreur lors du chargement.';
      }
    }

    document.getElementById('nouvelle').addEventListener('click', chargerCitation);
    window.addEventListener('load', chargerCitation);
  </script>
</body>
</html>
